{%extends 'index.html'%}
{%load crispy_forms_tags%}
{%block content%}

<br>
<br>
<br>
<br>


<b style="color: black;">DEFAULTER REPORTS</b>

  <a href="{%url 'user'%}" class="btn btn-outline-info btn-sm mybuttons ">View users</a>
  <a href="{%url 'transaction_home'%}" class="btn btn-outline-primary btn-sm mybuttons ml-2">Home</a>
<br>
<br>

<div class="table-responsive ">
    <table id="dataTable" class="table table-sm  table-light table-bordered  table-hover styleTable">



        <thead class="table-light">
        <tr>
            <th scope="col">Listing companies</th>
            <th scope="col">Default amount</th>
            <th scope="col">Listed defaulters</th>
            
        </tr>  
        
        </thead>

        <tbody>
          {%for transaction in transactions|slice:":1"%}
          <td><b>{{transaction.admin_users}}</b></td>
          <td><b>{{transaction.admin_amount}}</b></td>
          <td><b>{{transaction.admin_defaulters}}</b></td>
         
          

        </tbody>
        {%endfor%}
    </table>

</div>

<hr>

<b style="color: black;">USERS</b>

  <a href="{%url 'admin'%}" class="btn btn-outline-info btn-sm mybuttons ">Back to reports</a>
<br>
<br>

<div class="table-responsive ">
    <table id="dataTable" class="table table-sm  table-light table-bordered  table-hover styleTable">



        <thead class="table-light">
        <tr>
            <th scope="col">Date joined</th>
            <th scope="col">Username</th>
            <th scope="col">Last login</th>
            <th scope="col">Is active</th>
        </tr>  
        
        </thead>

        <tbody>
          {%for user in users%}
          <td><b>{{user.date_joined|date:'j b,y'}}</b></td>
          <td><b>{{user.username}}</b></td>
          <td><b>{{user.last_login}}(+3hrs)</b></td>
         
          <td><b>{{user.is_active}}</b></td>

        </tbody>
        {%endfor%}
    </table>

    {%if is_paginated%}

    {%if page_obj.has_previous%}

    <a href="?page=1" class="btn btn-outline-primary btn-small badge-pill mb-4">first </a>
    <a href="?page={{page_obj.previous_page_number}}"
        class="btn btn-outline-primary btn-small badge-pill  mb-4">previous</a>

    {%endif%}

    {%for num in page_obj.paginator.page_range%}

    {%if page_obj.number == num%}

    <a href="?page={{num}}" class="btn btn-outline-primary btn-small badge-pill  mb-4">{{num}}</a>
    {%elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3'%} <a href="?page={{num}}"
        class="btn btn-outline-primary btn-small badge-pill mb-4">{{num}}</a>

        {%endif%}
        {%endfor%}

        {%if page_obj.has_next%}

        <a href="?page={{page_obj.next_page_number}}" class="btn btn-outline-primary btn-small badge-pill mb-4">next</a>
        <a href="?page={{page_obj.paginator.num_pages}}"
            class="btn btn-outline-primary btn-small badge-pill mb-4">last</a>

        {%endif%}

        {%endif%}
   </div> 
{%endblock%}




